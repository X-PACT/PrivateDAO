<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PrivateDAO ‚Äî Private Governance on Solana</title>
<meta name="description" content="PrivateDAO is a Solana commit-reveal governance protocol with timelocked treasury execution.">
<meta property="og:title" content="PrivateDAO ‚Äî Private Governance on Solana">
<meta property="og:description" content="Commit-reveal voting, quadratic governance, and timelocked execution for serious DAOs.">
<meta property="og:type" content="website">
<meta property="og:image" content="assets/social-preview.svg">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="PrivateDAO ‚Äî Private Governance on Solana">
<meta name="twitter:description" content="Commit-reveal voting and timelocked execution for Solana DAOs.">
<meta name="twitter:image" content="assets/social-preview.svg">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@300;400;500;600;700&family=Bebas+Neue&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
<style>
:root {
  --void: #000305;
  --deep: #040a0f;
  --surface: #081420;
  --card: #0c1e30;
  --border: #112840;
  --border2: #1a3a5c;
  --cyan: #00e5ff;
  --cyan2: #00b8d4;
  --cyan-dim: rgba(0,229,255,0.08);
  --cyan-glow: rgba(0,229,255,0.15);
  --green: #00ff88;
  --green-dim: rgba(0,255,136,0.08);
  --red: #ff2d55;
  --red-dim: rgba(255,45,85,0.1);
  --amber: #ffb300;
  --text: #e0f0ff;
  --text2: #7090b0;
  --text3: #3a5570;
  --mono: 'IBM Plex Mono', monospace;
  --display: 'Bebas Neue', sans-serif;
  --body: 'DM Sans', sans-serif;
}

*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }

html { scroll-behavior: smooth; }

body {
  background: var(--void);
  color: var(--text);
  font-family: var(--body);
  min-height: 100vh;
  overflow-x: hidden;
  cursor: none;
}

/* Custom cursor */
.cursor {
  position: fixed;
  width: 12px; height: 12px;
  background: var(--cyan);
  border-radius: 50%;
  pointer-events: none;
  z-index: 9999;
  transition: transform 0.1s, opacity 0.2s;
  mix-blend-mode: difference;
}
.cursor-ring {
  position: fixed;
  width: 40px; height: 40px;
  border: 1px solid var(--cyan);
  border-radius: 50%;
  pointer-events: none;
  z-index: 9998;
  transition: all 0.15s ease;
  opacity: 0.4;
}

/* Scanline overlay */
body::before {
  content: '';
  position: fixed; inset: 0;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(0,229,255,0.008) 2px,
    rgba(0,229,255,0.008) 4px
  );
  pointer-events: none;
  z-index: 1000;
}

/* Animated bg */
.bg-scene {
  position: fixed; inset: 0;
  pointer-events: none;
  overflow: hidden;
}

.bg-grid {
  position: absolute; inset: -50%;
  background-image:
    linear-gradient(rgba(0,229,255,0.04) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0,229,255,0.04) 1px, transparent 1px);
  background-size: 60px 60px;
  animation: gridDrift 30s linear infinite;
}

@keyframes gridDrift {
  from { transform: translate(0,0) rotate(0deg); }
  to { transform: translate(60px, 60px) rotate(0.5deg); }
}

.bg-orb {
  position: absolute;
  border-radius: 50%;
  filter: blur(80px);
  animation: orbFloat 20s ease-in-out infinite;
}
.orb1 { width:600px; height:600px; background:rgba(0,229,255,0.04); top:-200px; right:-100px; animation-delay:0s; }
.orb2 { width:400px; height:400px; background:rgba(0,255,136,0.03); bottom:-100px; left:-100px; animation-delay:-10s; }
.orb3 { width:300px; height:300px; background:rgba(255,45,85,0.02); top:50%; left:50%; animation-delay:-5s; }

@keyframes orbFloat {
  0%,100% { transform: translate(0,0) scale(1); }
  33% { transform: translate(30px,-30px) scale(1.05); }
  66% { transform: translate(-20px,20px) scale(0.95); }
}

/* ‚îÄ‚îÄ LAYOUT ‚îÄ‚îÄ */
.container { max-width: 1280px; margin: 0 auto; padding: 0 32px; position: relative; z-index: 1; }

/* ‚îÄ‚îÄ NAV ‚îÄ‚îÄ */
nav {
  position: fixed; top: 0; left: 0; right: 0;
  z-index: 500;
  padding: 20px 0;
  border-bottom: 1px solid transparent;
  transition: all 0.3s;
}
nav.scrolled {
  background: rgba(4,10,15,0.95);
  backdrop-filter: blur(24px);
  border-bottom-color: var(--border);
}
.nav-inner { display:flex; align-items:center; justify-content:space-between; }

.logo-wrap { display:flex; align-items:center; gap:14px; }
.logo-mark {
  width: 38px; height: 38px;
  border: 1.5px solid var(--cyan);
  border-radius: 10px;
  display: flex; align-items:center; justify-content:center;
  position: relative;
  overflow: hidden;
}
.logo-mark::before {
  content: '';
  position: absolute; inset: 0;
  background: linear-gradient(135deg, var(--cyan-dim), transparent);
}
.logo-mark svg { position: relative; z-index: 1; }
.logo-name {
  font-family: var(--display);
  font-size: 26px;
  letter-spacing: 2px;
  color: var(--text);
}
.logo-name em { color: var(--cyan); font-style: normal; }

.nav-links { display:flex; gap:8px; }
.nav-link {
  padding: 8px 18px;
  font-size: 13px;
  font-weight: 500;
  color: var(--text2);
  background: transparent;
  border: none;
  cursor: pointer;
  border-radius: 8px;
  transition: all 0.2s;
  font-family: var(--body);
  letter-spacing: 0.5px;
}
.nav-link:hover, .nav-link.active { color: var(--cyan); background: var(--cyan-dim); }

.wallet-btn {
  display: flex; align-items:center; gap:10px;
  padding: 10px 22px;
  border: 1px solid var(--border2);
  background: var(--card);
  border-radius: 12px;
  color: var(--text);
  font-family: var(--mono);
  font-size: 13px;
  cursor: pointer;
  transition: all 0.25s;
  position: relative;
  overflow: hidden;
}
.wallet-btn::before {
  content: '';
  position: absolute; inset: 0;
  background: linear-gradient(90deg, transparent, var(--cyan-glow), transparent);
  transform: translateX(-100%);
  transition: transform 0.4s;
}
.wallet-btn:hover::before { transform: translateX(100%); }
.wallet-btn:hover { border-color: var(--cyan); color: var(--cyan); }
.wallet-btn.connected { border-color: var(--green); color: var(--green); }

.status-dot {
  width: 7px; height: 7px;
  border-radius: 50%;
  background: var(--text3);
  transition: all 0.3s;
}
.status-dot.live { background: var(--green); animation: dotPulse 2s infinite; }
.status-dot.error { background: var(--red); }

@keyframes dotPulse {
  0%,100% { box-shadow: 0 0 0 0 rgba(0,255,136,0.4); }
  50% { box-shadow: 0 0 0 6px rgba(0,255,136,0); }
}

/* ‚îÄ‚îÄ HERO ‚îÄ‚îÄ */
.hero {
  min-height: 100vh;
  display: flex; align-items: center;
  padding: 120px 0 80px;
  position: relative;
}

.hero-content { max-width: 760px; }

.hero-eyebrow {
  display: inline-flex; align-items:center; gap:10px;
  padding: 7px 16px;
  border: 1px solid var(--border2);
  border-radius: 100px;
  background: var(--card);
  font-family: var(--mono);
  font-size: 11px;
  color: var(--cyan);
  letter-spacing: 2px;
  margin-bottom: 40px;
  animation: fadeUp 0.8s ease both;
}

.hero-headline {
  font-family: var(--display);
  font-size: clamp(80px, 12vw, 140px);
  line-height: 0.9;
  letter-spacing: 2px;
  margin-bottom: 32px;
  animation: fadeUp 0.8s ease 0.1s both;
}

.hero-headline .line1 { display: block; color: var(--text); }
.hero-headline .line2 {
  display: block;
  color: transparent;
  -webkit-text-stroke: 1.5px var(--cyan);
  position: relative;
}
.hero-headline .line3 { display: block; color: var(--cyan); }

.hero-sub {
  font-size: 18px;
  color: var(--text2);
  line-height: 1.7;
  max-width: 540px;
  margin-bottom: 48px;
  animation: fadeUp 0.8s ease 0.2s both;
}

.hero-actions {
  display: flex; gap: 16px; flex-wrap: wrap;
  animation: fadeUp 0.8s ease 0.3s both;
}

.btn-primary {
  padding: 16px 36px;
  background: var(--cyan);
  color: var(--void);
  border: none;
  border-radius: 12px;
  font-family: var(--body);
  font-weight: 600;
  font-size: 16px;
  cursor: pointer;
  transition: all 0.25s;
  letter-spacing: 0.3px;
}
.btn-primary:hover { background: #33ecff; transform: translateY(-2px); box-shadow: 0 12px 40px rgba(0,229,255,0.3); }

.btn-ghost {
  padding: 16px 36px;
  background: transparent;
  color: var(--text);
  border: 1px solid var(--border2);
  border-radius: 12px;
  font-family: var(--body);
  font-weight: 500;
  font-size: 16px;
  cursor: pointer;
  transition: all 0.25s;
}
.btn-ghost:hover { border-color: var(--cyan); color: var(--cyan); background: var(--cyan-dim); }

/* Hero stats ticker */
.hero-stats {
  position: absolute;
  bottom: 60px; left: 0; right: 0;
  animation: fadeUp 0.8s ease 0.5s both;
}
.stats-inner {
  display: flex; gap: 0;
  border: 1px solid var(--border);
  border-radius: 16px;
  overflow: hidden;
  background: var(--card);
  max-width: 680px;
}
.stat-item {
  flex: 1;
  padding: 20px 28px;
  border-right: 1px solid var(--border);
  position: relative;
}
.stat-item:last-child { border-right: none; }
.stat-num {
  font-family: var(--mono);
  font-size: 28px;
  font-weight: 700;
  color: var(--cyan);
  display: block;
  line-height: 1;
  margin-bottom: 6px;
}
.stat-label { font-size: 12px; color: var(--text3); letter-spacing: 0.5px; }

/* ‚îÄ‚îÄ PROBLEM SECTION ‚îÄ‚îÄ */
.section { padding: 120px 0; }

.section-tag {
  font-family: var(--mono);
  font-size: 10px;
  color: var(--cyan);
  letter-spacing: 4px;
  text-transform: uppercase;
  margin-bottom: 20px;
}

.section-heading {
  font-family: var(--display);
  font-size: clamp(48px, 6vw, 80px);
  letter-spacing: 1px;
  line-height: 0.95;
  margin-bottom: 60px;
}

/* Compare grid */
.compare-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2px;
  border-radius: 20px;
  overflow: hidden;
}

.compare-panel {
  background: var(--card);
  padding: 48px;
  position: relative;
}

.compare-panel.bad { border-top: 3px solid var(--red); }
.compare-panel.good { border-top: 3px solid var(--cyan); }

.compare-tag {
  font-family: var(--mono);
  font-size: 10px;
  letter-spacing: 2px;
  padding: 5px 14px;
  border-radius: 4px;
  display: inline-block;
  margin-bottom: 24px;
}
.compare-panel.bad .compare-tag { background: var(--red-dim); color: var(--red); }
.compare-panel.good .compare-tag { background: var(--cyan-dim); color: var(--cyan); }

.compare-title {
  font-size: 22px;
  font-weight: 600;
  margin-bottom: 14px;
  letter-spacing: -0.3px;
}
.compare-desc { font-size: 14px; color: var(--text2); line-height: 1.7; margin-bottom: 28px; }

/* Live tally simulation */
.tally-live {
  background: var(--void);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 24px;
  font-family: var(--mono);
}
.tally-live-header { font-size: 10px; color: var(--text3); letter-spacing: 2px; margin-bottom: 18px; display:flex; justify-content:space-between; }
.tally-live-header span { color: var(--red); animation: blink 1s infinite; }
@keyframes blink { 0%,100%{opacity:1} 50%{opacity:0} }

.tally-row { margin-bottom: 14px; }
.tally-row-top { display:flex; justify-content:space-between; margin-bottom:6px; font-size:12px; }
.tally-row-label { color: var(--text2); }
.tally-bar { height: 5px; background: var(--border); border-radius: 3px; overflow:hidden; }
.tally-fill-yes { height:100%; background: var(--green); border-radius:3px; transition: width 1.5s cubic-bezier(.4,0,.2,1); }
.tally-fill-no { height:100%; background: var(--red); border-radius:3px; transition: width 1.5s cubic-bezier(.4,0,.2,1); }

.whale-alert {
  margin-top: 18px;
  padding: 10px 14px;
  background: var(--red-dim);
  border: 1px solid rgba(255,45,85,0.3);
  border-radius: 8px;
  font-size: 11px;
  color: var(--red);
  display: flex; gap: 8px; align-items: flex-start;
}

/* Sealed tally */
.tally-sealed {
  background: var(--void);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 24px;
  font-family: var(--mono);
}
.tally-sealed-header { font-size: 10px; color: var(--text3); letter-spacing: 2px; margin-bottom: 20px; }

.sealed-display {
  display: flex; align-items: center; justify-content: center;
  height: 72px;
  border: 1px dashed var(--border2);
  border-radius: 10px;
  font-size: 32px;
  font-weight: 700;
  color: var(--cyan);
  position: relative;
  overflow: hidden;
  margin-bottom: 16px;
}
.sealed-display::before {
  content: '';
  position: absolute; inset: 0;
  background: linear-gradient(90deg, transparent, var(--cyan-dim), transparent);
  animation: shimmer 3s infinite;
}
@keyframes shimmer { from{transform:translateX(-100%)} to{transform:translateX(100%)} }
.sealed-label {
  text-align: center;
  font-size: 10px;
  color: var(--text3);
  letter-spacing: 2px;
}

.sealed-info { margin-top: 16px; font-size: 11px; color: var(--text3); line-height: 1.8; }
.sealed-info span { color: var(--cyan); }

/* ‚îÄ‚îÄ PROPOSALS ‚îÄ‚îÄ */
.proposals-header {
  display:flex; justify-content:space-between; align-items:flex-end;
  margin-bottom: 32px;
}

.proposals-grid { display: grid; gap: 12px; }

.proposal-card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 28px 32px;
  cursor: pointer;
  transition: all 0.3s;
  position: relative;
  overflow: hidden;
}
.proposal-card::after {
  content: '';
  position: absolute;
  left: 0; top: 0; bottom: 0;
  width: 3px;
  background: var(--cyan);
  transform: scaleY(0);
  transition: transform 0.3s;
  transform-origin: bottom;
}
.proposal-card:hover { border-color: var(--border2); transform: translateX(4px); }
.proposal-card:hover::after { transform: scaleY(1); }

.proposal-card.phase-commit::after { background: var(--amber); }
.proposal-card.phase-reveal::after { background: var(--cyan); }
.proposal-card.phase-passed::after { background: var(--green); }

.proposal-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:14px; }
.proposal-id { font-family: var(--mono); font-size: 11px; color: var(--text3); }

.phase-pill {
  font-family: var(--mono);
  font-size: 10px;
  padding: 4px 12px;
  border-radius: 100px;
  letter-spacing: 1px;
}
.pill-commit { background: rgba(255,179,0,0.1); color: var(--amber); border: 1px solid rgba(255,179,0,0.2); }
.pill-reveal { background: var(--cyan-dim); color: var(--cyan); border: 1px solid rgba(0,229,255,0.2); }
.pill-passed { background: var(--green-dim); color: var(--green); border: 1px solid rgba(0,255,136,0.2); }
.pill-failed { background: var(--red-dim); color: var(--red); border: 1px solid rgba(255,45,85,0.2); }

.proposal-title { font-size: 18px; font-weight: 600; margin-bottom: 8px; letter-spacing: -0.3px; }
.proposal-desc { font-size: 13px; color: var(--text2); line-height: 1.6; margin-bottom: 20px; }

.proposal-meta { display:flex; gap:28px; margin-bottom: 18px; }
.meta-kv { font-size: 12px; }
.meta-k { color: var(--text3); margin-bottom: 3px; }
.meta-v { font-family: var(--mono); color: var(--text); font-size: 13px; }

.tally-sealed-mini {
  display: flex; align-items:center; gap:12px;
  padding: 14px 18px;
  background: var(--void);
  border: 1px solid var(--border);
  border-radius: 10px;
  font-family: var(--mono);
  font-size: 12px;
}
.lock-glyph { color: var(--cyan); font-size: 14px; }
.sealed-text { flex: 1; color: var(--text3); }
.sealed-count { color: var(--cyan); }

/* Revealed tally */
.tally-revealed { background: var(--void); border: 1px solid var(--border); border-radius: 10px; padding: 16px 18px; }
.tally-r-row { display:flex; align-items:center; gap:10px; margin-bottom: 8px; }
.tally-r-row:last-child { margin-bottom: 0; }
.tally-r-label { font-family: var(--mono); font-size: 11px; width: 24px; }
.tally-r-bar { flex:1; height: 5px; background: var(--border); border-radius: 3px; overflow: hidden; }
.tally-r-fill { height: 100%; border-radius: 3px; animation: barGrow 1.2s ease; }
@keyframes barGrow { from{width:0 !important} }
.tally-r-val { font-family: var(--mono); font-size: 12px; width: 80px; text-align:right; }

.proposal-actions { display:flex; gap: 10px; margin-top: 18px; }
.action-btn {
  flex: 1;
  padding: 12px;
  border-radius: 10px;
  font-family: var(--body);
  font-weight: 600;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.2s;
  border: none;
}
.action-commit { background: var(--amber); color: var(--void); }
.action-commit:hover { background: #ffc733; transform: translateY(-1px); }
.action-reveal { background: var(--cyan); color: var(--void); }
.action-reveal:hover { background: #33ecff; transform: translateY(-1px); }
.action-execute { background: var(--green); color: var(--void); }
.action-execute:hover:not(:disabled) { background: #33ffa0; transform: translateY(-1px); }
.action-execute:disabled { opacity: 0.4; cursor: not-allowed; }
.action-veto { background: var(--red-dim); color: var(--red); border: 1px solid rgba(255,45,85,0.3) !important; flex: 0 0 auto; padding: 12px 20px; }
.action-veto:hover { background: rgba(255,45,85,0.2); }

/* ‚îÄ‚îÄ HOW IT WORKS ‚îÄ‚îÄ */
.protocol-steps {
  display: grid;
  grid-template-columns: repeat(3,1fr);
  gap: 2px;
  border-radius: 20px;
  overflow: hidden;
  margin-bottom: 60px;
}
.protocol-step {
  background: var(--card);
  padding: 48px 40px;
  position: relative;
}
.step-num {
  font-family: var(--mono);
  font-size: 80px;
  font-weight: 700;
  color: var(--border);
  line-height: 1;
  margin-bottom: 28px;
  display: block;
}
.step-icon { font-size: 36px; margin-bottom: 20px; display: block; }
.step-title { font-size: 20px; font-weight: 700; margin-bottom: 12px; letter-spacing: -0.3px; }
.step-desc { font-size: 14px; color: var(--text2); line-height: 1.7; margin-bottom: 20px; }
.step-code {
  background: var(--void);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 16px;
  font-family: var(--mono);
  font-size: 11px;
  color: var(--cyan);
  line-height: 1.8;
}
.step-code .comment { color: var(--text3); }

/* ‚îÄ‚îÄ FEATURES ‚îÄ‚îÄ */
.features-grid {
  display: grid;
  grid-template-columns: repeat(2,1fr);
  gap: 16px;
}
.feature-card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 36px;
  transition: all 0.3s;
  position: relative;
  overflow: hidden;
}
.feature-card::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, var(--cyan), transparent);
  opacity: 0;
  transition: opacity 0.3s;
}
.feature-card:hover { border-color: var(--border2); transform: translateY(-3px); }
.feature-card:hover::before { opacity: 1; }

.feature-icon-wrap {
  width: 52px; height: 52px;
  border: 1px solid var(--border2);
  border-radius: 14px;
  display: flex; align-items:center; justify-content:center;
  font-size: 24px;
  margin-bottom: 24px;
  background: var(--surface);
  transition: all 0.3s;
}
.feature-card:hover .feature-icon-wrap { border-color: var(--cyan); background: var(--cyan-dim); }
.feature-title { font-size: 18px; font-weight: 600; margin-bottom: 10px; letter-spacing: -0.3px; }
.feature-desc { font-size: 14px; color: var(--text2); line-height: 1.7; }
.feature-badge {
  display: inline-block;
  margin-top: 18px;
  font-family: var(--mono);
  font-size: 9px;
  color: var(--cyan);
  background: var(--cyan-dim);
  padding: 3px 10px;
  border-radius: 4px;
  letter-spacing: 2px;
}

/* ‚îÄ‚îÄ SECURITY TABLE ‚îÄ‚îÄ */
.sec-table { width: 100%; border-collapse: collapse; }
.sec-table th {
  text-align: left;
  padding: 16px 24px;
  font-family: var(--mono);
  font-size: 10px;
  letter-spacing: 2px;
  color: var(--text3);
  border-bottom: 1px solid var(--border);
  background: var(--card);
}
.sec-table td {
  padding: 18px 24px;
  font-size: 14px;
  border-bottom: 1px solid var(--border);
  transition: background 0.2s;
}
.sec-table tr:hover td { background: var(--card); }
.sec-table tr:last-child td { border-bottom: none; }
.sec-table .check { color: var(--green); font-size: 16px; }
.sec-table .fail { color: var(--red); font-size: 16px; }
.sec-table .mono-sm { font-family: var(--mono); font-size: 11px; color: var(--text3); }

/* ‚îÄ‚îÄ REALMS MIGRATION ‚îÄ‚îÄ */
.migration-card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 20px;
  padding: 56px;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 60px;
  align-items: center;
}
.migration-title { font-family: var(--display); font-size: 56px; letter-spacing: 1px; line-height: 0.95; margin-bottom: 20px; }
.migration-desc { font-size: 16px; color: var(--text2); line-height: 1.7; margin-bottom: 32px; }
.migration-steps { display:flex; flex-direction:column; gap:16px; }
.migration-step {
  display: flex; gap: 16px; align-items: flex-start;
  padding: 18px 22px;
  background: var(--void);
  border: 1px solid var(--border);
  border-radius: 12px;
  transition: all 0.2s;
}
.migration-step:hover { border-color: var(--cyan); }
.migration-step-num {
  width: 28px; height: 28px;
  border: 1px solid var(--border2);
  border-radius: 8px;
  display: flex; align-items:center; justify-content:center;
  font-family: var(--mono);
  font-size: 12px;
  color: var(--cyan);
  flex-shrink: 0;
}
.migration-step-text { font-size: 14px; color: var(--text2); line-height: 1.5; }
.migration-step-text strong { color: var(--text); display: block; margin-bottom: 3px; }

/* ‚îÄ‚îÄ MODAL ‚îÄ‚îÄ */
.modal-overlay {
  position: fixed; inset: 0;
  background: rgba(0,3,5,0.92);
  backdrop-filter: blur(16px);
  z-index: 800;
  display: flex; align-items:center; justify-content:center;
  padding: 24px;
  opacity: 0; pointer-events: none;
  transition: opacity 0.3s;
}
.modal-overlay.open { opacity: 1; pointer-events: all; }

.modal {
  background: var(--card);
  border: 1px solid var(--border2);
  border-radius: 24px;
  padding: 48px;
  width: 100%; max-width: 580px;
  position: relative;
  transform: scale(0.95);
  transition: transform 0.3s;
}
.modal-overlay.open .modal { transform: scale(1); }

.modal-close {
  position: absolute; top: 20px; right: 20px;
  width: 34px; height: 34px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 10px;
  color: var(--text2);
  cursor: pointer;
  font-size: 14px;
  display: flex; align-items:center; justify-content:center;
  transition: all 0.2s;
}
.modal-close:hover { background: var(--red-dim); color: var(--red); border-color: var(--red); }

.modal-title { font-family: var(--display); font-size: 40px; letter-spacing: 1px; margin-bottom: 6px; }
.modal-sub { font-size: 14px; color: var(--text2); margin-bottom: 36px; }

/* Vote options */
.vote-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 28px; }
.vote-opt {
  padding: 24px;
  border: 2px solid var(--border);
  border-radius: 14px;
  text-align: center;
  cursor: pointer;
  transition: all 0.2s;
  font-family: var(--display);
  font-size: 32px;
  letter-spacing: 2px;
}
.vote-opt.yes:hover, .vote-opt.yes.sel { border-color: var(--green); background: var(--green-dim); color: var(--green); }
.vote-opt.no:hover, .vote-opt.no.sel { border-color: var(--red); background: var(--red-dim); color: var(--red); }

/* Commitment preview */
.commit-preview {
  background: var(--void);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 22px;
  margin-bottom: 24px;
}
.commit-preview-label { font-family: var(--mono); font-size: 9px; color: var(--text3); letter-spacing: 3px; margin-bottom: 14px; }
.commit-formula { font-family: var(--mono); font-size: 12px; color: var(--amber); margin-bottom: 14px; }
.commit-hash {
  font-family: var(--mono);
  font-size: 11px;
  color: var(--cyan);
  word-break: break-all;
  line-height: 1.8;
  min-height: 44px;
}
.commit-hash.computing { animation: hashFlicker 0.08s infinite; }
@keyframes hashFlicker { 0%,100%{opacity:1} 50%{opacity:.4} }

.network-indicator {
  display: flex; align-items:center; gap: 10px;
  padding: 12px 16px;
  background: var(--void);
  border: 1px solid var(--border);
  border-radius: 10px;
  font-family: var(--mono);
  font-size: 11px;
  color: var(--text3);
  margin-bottom: 20px;
}
.network-indicator .net-dot { width: 6px; height: 6px; border-radius: 50%; background: var(--green); animation: dotPulse 2s infinite; }
.network-indicator .net-name { color: var(--cyan); }

.rebate-note {
  display: flex; align-items:center; gap:8px;
  padding: 10px 14px;
  background: var(--green-dim);
  border: 1px solid rgba(0,255,136,0.2);
  border-radius: 8px;
  font-family: var(--mono);
  font-size: 11px;
  color: var(--green);
  margin-bottom: 20px;
}

.submit-btn {
  width: 100%;
  padding: 18px;
  background: var(--cyan);
  color: var(--void);
  border: none;
  border-radius: 14px;
  font-family: var(--body);
  font-weight: 700;
  font-size: 16px;
  cursor: pointer;
  transition: all 0.25s;
  position: relative;
  overflow: hidden;
}
.submit-btn::before {
  content: '';
  position: absolute; inset: 0;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.15), transparent);
  transform: translateX(-100%);
}
.submit-btn:hover { background: #33ecff; transform: translateY(-2px); box-shadow: 0 12px 40px rgba(0,229,255,0.3); }
.submit-btn:hover::before { transform: translateX(100%); transition: transform 0.5s; }
.submit-btn:disabled { opacity: 0.35; cursor: not-allowed; transform: none; box-shadow: none; }

/* ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ */
footer {
  border-top: 1px solid var(--border);
  padding: 48px 0;
}
.footer-inner { display:flex; justify-content:space-between; align-items:center; flex-wrap: wrap; gap: 20px; }
.footer-brand { font-family: var(--display); font-size: 22px; letter-spacing: 2px; color: var(--text2); }
.footer-brand em { color: var(--cyan); font-style: normal; }
.footer-meta { font-family: var(--mono); font-size: 11px; color: var(--text3); }
.footer-links { display:flex; gap:24px; }
.footer-link { font-size: 13px; color: var(--text3); text-decoration:none; transition:color 0.2s; }
.footer-link:hover { color: var(--cyan); }

/* ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ */
.toast {
  position: fixed;
  bottom: 32px; left: 50%;
  transform: translateX(-50%) translateY(80px);
  background: var(--card);
  border: 1px solid var(--border2);
  border-radius: 14px;
  padding: 14px 24px;
  font-family: var(--mono);
  font-size: 13px;
  z-index: 900;
  transition: transform 0.3s ease;
  white-space: nowrap;
  max-width: 90vw;
}
.toast.show { transform: translateX(-50%) translateY(0); }
.toast.success { border-color: var(--green); color: var(--green); }
.toast.error { border-color: var(--red); color: var(--red); }
.toast.info { border-color: var(--cyan); color: var(--cyan); }

/* ‚îÄ‚îÄ ANIMATIONS ‚îÄ‚îÄ */
@keyframes fadeUp { from{opacity:0;transform:translateY(24px)} to{opacity:1;transform:none} }

.reveal { opacity:0; transform:translateY(28px); transition: all 0.7s ease; }
.reveal.in { opacity:1; transform:none; }

/* Page sections */
.page { display: none; }
.page.active { display: block; }

/* ‚îÄ‚îÄ RESPONSIVE ‚îÄ‚îÄ */
@media(max-width:900px) {
  .compare-grid, .protocol-steps, .features-grid { grid-template-columns: 1fr; }
  .migration-card { grid-template-columns: 1fr; }
  .nav-links { display: none; }
  .hero-headline { font-size: 72px; }
  .stats-inner { flex-wrap: wrap; }
  .stat-item { min-width: 45%; }
}
</style>
</head>
<body>

<div class="cursor" id="cursor"></div>
<div class="cursor-ring" id="cursorRing"></div>

<div class="bg-scene">
  <div class="bg-grid"></div>
  <div class="bg-orb orb1"></div>
  <div class="bg-orb orb2"></div>
  <div class="bg-orb orb3"></div>
</div>

<!-- NAV -->
<nav id="nav">
  <div class="container">
    <div class="nav-inner">
      <div class="logo-wrap">
        <div class="logo-mark">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <rect x="3" y="8" width="14" height="10" rx="2" stroke="#00e5ff" stroke-width="1.5"/>
            <path d="M6 8V6a4 4 0 018 0v2" stroke="#00e5ff" stroke-width="1.5" stroke-linecap="round"/>
            <circle cx="10" cy="13" r="1.5" fill="#00e5ff"/>
          </svg>
        </div>
        <span class="logo-name">Private<em>DAO</em></span>
      </div>
      <div class="nav-links">
        <button class="nav-link active" onclick="showPage('proposals',this)">Proposals</button>
        <button class="nav-link" onclick="showPage('protocol',this)">Protocol</button>
        <button class="nav-link" onclick="showPage('migrate',this)">Migrate from Realms</button>
        <button class="nav-link" onclick="showPage('security',this)">Security</button>
      </div>
      <button class="wallet-btn" id="walletBtn" onclick="connectWallet()">
        <span class="status-dot" id="statusDot"></span>
        <span id="walletLabel">Connect Wallet</span>
      </button>
    </div>
  </div>
</nav>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê PAGE: PROPOSALS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="page active" id="page-proposals">

<!-- HERO -->
<section class="hero">
  <div class="container">
    <div class="hero-content">
      <div class="hero-eyebrow">‚óà SOLANA GRAVEYARD HACKATHON 2026</div>
      <h1 class="hero-headline">
        <span class="line1">VOTE</span>
        <span class="line2">WITHOUT</span>
        <span class="line3">FEAR.</span>
      </h1>
      <p class="hero-sub">
        The first commit-reveal governance protocol on Solana.
        Zero tally visibility during voting ‚Äî eliminating whale intimidation,
        vote buying, and treasury front-running forever.
      </p>
      <div class="hero-actions">
        <button class="btn-primary" onclick="scrollToProposals()">View Proposals</button>
        <button class="btn-ghost" onclick="showPage('protocol', document.querySelectorAll('.nav-link')[1])">How It Works ‚Üí</button>
      </div>
    </div>

    <div class="hero-stats">
      <div class="stats-inner">
        <div class="stat-item">
          <span class="stat-num" id="statTally">0 / 0</span>
          <div class="stat-label">TALLY DURING VOTING</div>
        </div>
        <div class="stat-item">
          <span class="stat-num">SHA256</span>
          <div class="stat-label">COMMITMENT SCHEME</div>
        </div>
        <div class="stat-item">
          <span class="stat-num">3√ó</span>
          <div class="stat-label">ATTACKS ELIMINATED</div>
        </div>
        <div class="stat-item">
          <span class="stat-num">24H</span>
          <div class="stat-label">EXECUTION TIMELOCK</div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- THE PROBLEM VS SOLUTION -->
<section class="section" style="padding-top:0">
  <div class="container">
    <div class="section-tag reveal">THE PROBLEM</div>
    <h2 class="section-heading reveal">Public voting is<br>broken by design.</h2>
    <div class="compare-grid reveal">
      <div class="compare-panel bad">
        <span class="compare-tag">‚ö† REALMS ‚Äî PUBLIC VOTING</span>
        <div class="compare-title">Every vote is visible in real-time</div>
        <div class="compare-desc">Whales watch the tally live, buy votes to flip proposals, and front-run treasury transfers. Smaller holders are intimidated into conformity.</div>
        <div class="tally-live">
          <div class="tally-live-header">
            <span>LIVE TALLY</span>
            <span>‚óè LIVE</span>
          </div>
          <div class="tally-row">
            <div class="tally-row-top">
              <span class="tally-row-label">YES</span>
              <span id="liveYesNum" style="font-size:12px;color:var(--green)">0</span>
            </div>
            <div class="tally-bar"><div class="tally-fill-yes" id="liveYesBar" style="width:0%"></div></div>
          </div>
          <div class="tally-row">
            <div class="tally-row-top">
              <span class="tally-row-label">NO</span>
              <span id="liveNoNum" style="font-size:12px;color:var(--red)">0</span>
            </div>
            <div class="tally-bar"><div class="tally-fill-no" id="liveNoBar" style="width:0%"></div></div>
          </div>
          <div class="whale-alert">
            <span>ü§ñ</span>
            <span>Bot detected: whale wallet buying votes to flip proposal. Front-running treasury transfer...</span>
          </div>
        </div>
      </div>
      <div class="compare-panel good">
        <span class="compare-tag">‚úì PRIVATEDAO ‚Äî COMMIT-REVEAL</span>
        <div class="compare-title">Tally sealed until voting ends</div>
        <div class="compare-desc">Voters submit sha256(vote‚Äñsalt‚Äñpubkey). The hash reveals nothing. After voting ends, proofs are verified on-chain. Zero bandwagon effect.</div>
        <div class="tally-sealed">
          <div class="tally-sealed-header">TALLY ‚Äî CRYPTOGRAPHICALLY SEALED</div>
          <div class="sealed-display">YES: ? &nbsp;/&nbsp; NO: ?</div>
          <div class="sealed-label">SEALED UNTIL REVEAL PHASE ENDS</div>
          <div class="sealed-info">
            <span>‚Ä∫</span> 127 commitments received<br>
            <span>‚Ä∫</span> Votes: cryptographically sealed<br>
            <span>‚Ä∫</span> Reveal opens in: 47:23:11
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- PROPOSALS LIST -->
<section class="section" id="proposals-anchor" style="padding-top:40px">
  <div class="container">
    <div class="proposals-header reveal">
      <div>
        <div class="section-tag">ACTIVE GOVERNANCE</div>
        <h2 class="section-heading" style="margin-bottom:0;font-size:56px">Live Proposals</h2>
      </div>
      <button class="btn-primary" onclick="openCommitModal(-1)">+ New Proposal</button>
    </div>

    <div class="proposals-grid reveal" id="proposalsList">
      <div class="proposal-card phase-commit">
        <div class="proposal-header">
          <span class="proposal-id">DEVNET ¬∑ LIVE DATA</span>
          <span class="phase-pill pill-commit">LOADING</span>
        </div>
        <div class="proposal-title">Loading proposals from Solana devnet</div>
        <div class="proposal-desc">The app reads real `Proposal` accounts from the configured program ID. If no proposals exist yet, this section will show an empty-state message.</div>
      </div>
    </div>
  </div>
</section>

<section class="section" id="demo" style="padding-top:20px">
  <div class="container">
    <div class="section-tag reveal">DEMO</div>
    <h2 class="section-heading reveal">Evaluator walkthrough</h2>
    <div class="reveal" style="background:var(--card);border:1px solid var(--border);border-radius:20px;padding:24px;line-height:1.8;color:var(--text2)">
      <p>1) Connect Phantom to verify wallet wiring and network status.</p>
      <p>2) Use CLI to run real flow: create proposal ‚Üí commit ‚Üí reveal ‚Üí finalize ‚Üí execute.</p>
      <p>3) Refresh this page to inspect devnet proposal addresses and phase transitions.</p>
      <p style="color:var(--amber)">This web page is an operational dashboard and walkthrough. Signed on-chain instructions are executed from the repository CLI scripts to keep behavior deterministic for judges.</p>
    </div>
  </div>
</section>

<section class="section" id="deployment-snapshot" style="padding-top:20px">
  <div class="container">
    <div class="section-tag reveal">DEPLOYMENT SNAPSHOT</div>
    <h2 class="section-heading reveal">Devnet status<br>is live and verifiable.</h2>
    <div class="reveal" style="background:var(--card);border:1px solid var(--border);border-radius:20px;padding:24px">
      <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:14px;font-family:var(--mono);font-size:12px">
        <div style="padding:14px;border:1px solid var(--border);border-radius:12px;background:var(--void)"><span style="color:var(--text3)">Status</span><br><span style="color:var(--green)">Deployed</span></div>
        <div style="padding:14px;border:1px solid var(--border);border-radius:12px;background:var(--void)"><span style="color:var(--text3)">Program ID</span><br><span style="word-break:break-all">62qdrtJGP23PwmvAn5c5B9xT1LSgdnq4p1sQsHnKVFhm</span></div>
        <div style="padding:14px;border:1px solid var(--border);border-radius:12px;background:var(--void)"><span style="color:var(--text3)">Network</span><br>Solana Devnet</div>
        <div style="padding:14px;border:1px solid var(--border);border-radius:12px;background:var(--void)"><span style="color:var(--text3)">Last deployed slot</span><br>444565780 (2026-02-25T11:47:34Z)</div>
        <div style="padding:14px;border:1px solid var(--border);border-radius:12px;background:var(--void)"><span style="color:var(--text3)">Upgrade authority</span><br><span style="word-break:break-all">4Mm5YTRbJuyA8NcWM85wTnx6ZQMXNph2DSnzCCKLhsMD</span></div>
        <div style="padding:14px;border:1px solid var(--border);border-radius:12px;background:var(--void)"><span style="color:var(--text3)">Explorer</span><br><a href="https://solscan.io/account/62qdrtJGP23PwmvAn5c5B9xT1LSgdnq4p1sQsHnKVFhm?cluster=devnet" target="_blank" style="color:var(--cyan);text-decoration:none">View on Solscan</a></div>
      </div>
    </div>
  </div>
</section>

<section class="section" id="ecosystem-mentions" style="padding-top:20px">
  <div class="container">
    <div class="section-tag reveal">ECOSYSTEM MENTIONS</div>
    <h2 class="section-heading reveal">Relevant companies<br>and organizations.</h2>
    <div class="reveal" style="background:var(--card);border:1px solid var(--border);border-radius:20px;padding:24px">
      <p style="color:var(--text2);margin-bottom:16px">This list highlights relevant ecosystem entities for tooling, infra, wallets, grants, and growth. It does not imply partnership or endorsement.</p>
      <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(170px,1fr));gap:10px;font-family:var(--mono);font-size:12px">
        <div style="padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:var(--void)">Solana Foundation</div>
        <div style="padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:var(--void)">Anza</div>
        <div style="padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:var(--void)">Coral (Anchor)</div>
        <div style="padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:var(--void)">Alchemy</div>
        <div style="padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:var(--void)">Helius</div>
        <div style="padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:var(--void)">QuickNode</div>
        <div style="padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:var(--void)">Triton One</div>
        <div style="padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:var(--void)">Dialect</div>
        <div style="padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:var(--void)">Squads Labs</div>
        <div style="padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:var(--void)">Phantom</div>
        <div style="padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:var(--void)">Solflare</div>
        <div style="padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:var(--void)">Backpack</div>
        <div style="padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:var(--void)">Jupiter</div>
        <div style="padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:var(--void)">Pyth Network</div>
        <div style="padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:var(--void)">Switchboard</div>
        <div style="padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:var(--void)">Chainlink</div>
        <div style="padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:var(--void)">Circle</div>
        <div style="padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:var(--void)">Wormhole Foundation</div>
        <div style="padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:var(--void)">Superteam</div>
        <div style="padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:var(--void)">Colosseum</div>
      </div>
    </div>
  </div>
</section>

</div><!-- /page-proposals -->

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê PAGE: PROTOCOL ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="page" id="page-protocol">
<section class="section" style="padding-top:140px">
  <div class="container">
    <div class="section-tag reveal">THE PROTOCOL</div>
    <h2 class="section-heading reveal">Three phases.<br>Zero leakage.</h2>

    <div class="protocol-steps reveal">
      <div class="protocol-step">
        <span class="step-num">01</span>
        <span class="step-icon">üîí</span>
        <div class="step-title">COMMIT</div>
        <div class="step-desc">During voting, every voter submits a cryptographic hash. The chain stores commitments ‚Äî not votes. Tally shows 0/0 to everyone.</div>
        <div class="step-code">
<span class="comment">// Commitment = sha256(vote‚Äñsalt‚Äñpubkey)</span>
commitment[32] = sha256(
  vote_byte, &nbsp;&nbsp;<span class="comment">// YES=1 NO=0</span>
  salt[32], &nbsp;&nbsp;&nbsp;<span class="comment">// random, kept private</span>
  pubkey[32] &nbsp;&nbsp;<span class="comment">// prevents replay</span>
)
<span class="comment">// Stored on-chain. Vote is hidden.</span>
        </div>
      </div>
      <div class="protocol-step" style="border-left:1px solid var(--border);border-right:1px solid var(--border)">
        <span class="step-num">02</span>
        <span class="step-icon">üîì</span>
        <div class="step-title">REVEAL</div>
        <div class="step-desc">After voting ends, voters prove (vote, salt). Program recomputes hash on-chain. Match = counted. 0.001 SOL rebate paid.</div>
        <div class="step-code">
<span class="comment">// On-chain verification</span>
sha256(vote‚Äñsalt‚Äñpubkey)
  == stored_commitment
    ‚Üí vote counted ‚úì
    ‚Üí rebate: +0.001 SOL

<span class="comment">// Keeper can reveal if you forget</span>
        </div>
      </div>
      <div class="protocol-step">
        <span class="step-num">03</span>
        <span class="step-icon">‚ö°</span>
        <div class="step-title">EXECUTE</div>
        <div class="step-desc">After reveal window closes, anyone finalizes. Result published. Treasury executes after 24h timelock via CPI.</div>
        <div class="step-code">
finalize() ‚Üí PASSED | FAILED
  ‚Üì
timelock: 86400s (24h)
  ‚Üì
execute() ‚Üí CPI
  SendSol | SendToken
  | CustomCPI
        </div>
      </div>
    </div>

    <div class="section-tag reveal" style="margin-top:80px">FEATURES</div>
    <h2 class="section-heading reveal">Built for real DAOs.</h2>

    <div class="features-grid reveal">
      <div class="feature-card">
        <div class="feature-icon-wrap">‚öñÔ∏è</div>
        <div class="feature-title">DualChamber Voting</div>
        <div class="feature-desc">Both capital chamber (token-weighted) AND community chamber (quadratic ‚àöbalance) must independently pass. Whales need genuine community support to push proposals through.</div>
        <span class="feature-badge">NOVEL ON SOLANA</span>
      </div>
      <div class="feature-card">
        <div class="feature-icon-wrap">ü§ù</div>
        <div class="feature-title">Private Delegation</div>
        <div class="feature-desc">Delegate your voting weight to any address for a specific proposal. The delegatee commits the combined weight. Neither the vote nor the combined weight is visible during voting phase.</div>
        <span class="feature-badge">FIRST OF ITS KIND</span>
      </div>
      <div class="feature-card">
        <div class="feature-icon-wrap">ü§ñ</div>
        <div class="feature-title">Keeper Auto-Reveal</div>
        <div class="feature-desc">Authorize a keeper address at commit time. If you forget to reveal, the keeper submits your proof and earns the rebate. Your vote is never changed ‚Äî only you hold the salt.</div>
        <span class="feature-badge">UX INNOVATION</span>
      </div>
      <div class="feature-card">
        <div class="feature-icon-wrap">üîå</div>
        <div class="feature-title">Three Voting Modes</div>
        <div class="feature-desc">TokenWeighted (raw balance), Quadratic (‚àöbalance anti-whale), or DualChamber (both must pass). DAOs choose their governance model at creation, not after.</div>
        <span class="feature-badge">CONFIGURABLE</span>
      </div>
    </div>
  </div>
</section>
</div><!-- /page-protocol -->

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê PAGE: MIGRATE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="page" id="page-migrate">
<section class="section" style="padding-top:140px">
  <div class="container">
    <div class="section-tag reveal">REALMS MIGRATION</div>
    <h2 class="section-heading reveal">Already on Realms?<br>Upgrade in minutes.</h2>

    <div class="migration-card reveal">
      <div>
        <div class="migration-title">ZERO<br>DISRUPTION<br>MIGRATION.</div>
        <div class="migration-desc">PrivateDAO implements spl-governance-addin-api VoterWeightRecord exactly. Your existing tokens, members, and proposals stay intact. Private voting is added as a plugin ‚Äî not a replacement.</div>
        <button class="btn-primary" onclick="startMigration()">Start Migration ‚Üí</button>
      </div>
      <div class="migration-steps">
        <div class="migration-step">
          <div class="migration-step-num">1</div>
          <div class="migration-step-text">
            <strong>Connect your Realms DAO authority wallet</strong>
            No token migration required. Zero downtime during transition.
          </div>
        </div>
        <div class="migration-step">
          <div class="migration-step-num">2</div>
          <div class="migration-step-text">
            <strong>Run migrate_from_realms instruction</strong>
            Copies governance config, token mint, member list, and voting thresholds on-chain.
          </div>
        </div>
        <div class="migration-step">
          <div class="migration-step-num">3</div>
          <div class="migration-step-text">
            <strong>Register as VoterWeight plugin in Realms</strong>
            PrivateDAO becomes your voter weight provider. Realms UI continues working normally.
          </div>
        </div>
        <div class="migration-step">
          <div class="migration-step-num">4</div>
          <div class="migration-step-text">
            <strong>All future votes are now private</strong>
            Existing members vote via PrivateDAO. Tally hidden until reveal. Treasury secured.
          </div>
        </div>
      </div>
    </div>

    <!-- Migration form -->
    <div style="margin-top:40px; background:var(--card); border:1px solid var(--border); border-radius:20px; padding:48px;" class="reveal">
      <div class="section-tag">MIGRATION FORM</div>
      <h3 style="font-size:28px;font-weight:700;margin-bottom:32px;letter-spacing:-0.5px">Configure Your Migration</h3>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:24px">
        <div>
          <label style="font-family:var(--mono);font-size:10px;color:var(--text3);letter-spacing:2px;display:block;margin-bottom:8px">REALMS GOVERNANCE PUBKEY</label>
          <input type="text" value="" style="width:100%;background:var(--void);border:1px solid var(--border);border-radius:10px;padding:14px 16px;color:var(--text);font-family:var(--mono);font-size:13px;outline:none;transition:border-color 0.2s" onfocus="this.style.borderColor='var(--cyan)'" onblur="this.style.borderColor='var(--border)'">
        </div>
        <div>
          <label style="font-family:var(--mono);font-size:10px;color:var(--text3);letter-spacing:2px;display:block;margin-bottom:8px">DAO NAME</label>
          <input type="text" value="" style="width:100%;background:var(--void);border:1px solid var(--border);border-radius:10px;padding:14px 16px;color:var(--text);font-family:var(--mono);font-size:13px;outline:none;transition:border-color 0.2s" onfocus="this.style.borderColor='var(--cyan)'" onblur="this.style.borderColor='var(--border)'">
        </div>
        <div>
          <label style="font-family:var(--mono);font-size:10px;color:var(--text3);letter-spacing:2px;display:block;margin-bottom:8px">GOVERNANCE TOKEN MINT</label>
          <input type="text" value="" style="width:100%;background:var(--void);border:1px solid var(--border);border-radius:10px;padding:14px 16px;color:var(--text);font-family:var(--mono);font-size:13px;outline:none;transition:border-color 0.2s" onfocus="this.style.borderColor='var(--cyan)'" onblur="this.style.borderColor='var(--border)'">
        </div>
        <div>
          <label style="font-family:var(--mono);font-size:10px;color:var(--text3);letter-spacing:2px;display:block;margin-bottom:8px">QUORUM (%)</label>
          <input type="number" value="51" style="width:100%;background:var(--void);border:1px solid var(--border);border-radius:10px;padding:14px 16px;color:var(--text);font-family:var(--mono);font-size:13px;outline:none;transition:border-color 0.2s" onfocus="this.style.borderColor='var(--cyan)'" onblur="this.style.borderColor='var(--border)'">
        </div>
      </div>
      <button class="btn-primary" style="width:100%;padding:18px;font-size:16px" onclick="startMigration()">
        Execute Migration On-Chain ‚Üí
      </button>
    </div>
  </div>
</section>
</div><!-- /page-migrate -->

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê PAGE: SECURITY ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="page" id="page-security">
<section class="section" style="padding-top:140px">
  <div class="container">
    <div class="section-tag reveal">THREAT MODEL</div>
    <h2 class="section-heading reveal">Every known attack.<br>Neutralized.</h2>
    <div style="background:var(--card);border:1px solid var(--border);border-radius:20px;overflow:hidden" class="reveal">
      <table class="sec-table">
        <thead>
          <tr>
            <th>ATTACK VECTOR</th>
            <th>PUBLIC VOTING</th>
            <th>PRIVATEDAO</th>
            <th>MECHANISM</th>
          </tr>
        </thead>
        <tbody>
          <tr><td><strong>Real-time tally tracking</strong></td><td><span class="fail">‚úó Trivial</span></td><td><span class="check">‚úì Impossible</span></td><td><span class="mono-sm">Commitment hides vote</span></td></tr>
          <tr><td><strong>Vote buying via tally watching</strong></td><td><span class="fail">‚úó Common</span></td><td><span class="check">‚úì No tally to watch</span></td><td><span class="mono-sm">0/0 during voting</span></td></tr>
          <tr><td><strong>Whale intimidation</strong></td><td><span class="fail">‚úó Systemic</span></td><td><span class="check">‚úì No visible pressure</span></td><td><span class="mono-sm">DualChamber + hidden tally</span></td></tr>
          <tr><td><strong>Treasury MEV / front-running</strong></td><td><span class="fail">‚úó Rampant</span></td><td><span class="check">‚úì Action sealed until finalize</span></td><td><span class="mono-sm">Hidden until reveal_end</span></td></tr>
          <tr><td><strong>Commitment replay attack</strong></td><td><span class="fail">‚úó N/A</span></td><td><span class="check">‚úì Pubkey in preimage</span></td><td><span class="mono-sm">sha256(v‚Äñs‚Äñpubkey)</span></td></tr>
          <tr><td><strong>Flash loan manipulation</strong></td><td><span class="fail">‚úó Common</span></td><td><span class="check">‚úì Weight at commit time</span></td><td><span class="mono-sm">Snapshotted on commit</span></td></tr>
          <tr><td><strong>Malicious proposal execution</strong></td><td><span class="fail">‚úó Instant</span></td><td><span class="check">‚úì 24h veto window</span></td><td><span class="mono-sm">Timelock + authority veto</span></td></tr>
          <tr><td><strong>Brute-force commitment</strong></td><td>N/A</td><td><span class="check">‚úì 2¬≤‚Åµ‚Å∂ combinations</span></td><td><span class="mono-sm">32-byte random salt</span></td></tr>
        </tbody>
      </table>
    </div>
  </div>
</section>
</div><!-- /page-security -->

<!-- FOOTER -->
<footer>
  <div class="container">
    <div class="footer-inner">
      <div class="footer-brand">Private<em>DAO</em></div>
      <div class="footer-meta">
        Program: 62qdrtJGP23PwmvAn5c5B9xT1LSgdnq4p1sQsHnKVFhm ¬∑ Solana Devnet ¬∑ AGPLv3+ / Commercial
      </div>
      <div class="footer-links">
        <a href="https://github.com/X-PACT/PrivateDAO" class="footer-link" target="_blank">GitHub</a>
        <a href="https://solscan.io/account/62qdrtJGP23PwmvAn5c5B9xT1LSgdnq4p1sQsHnKVFhm?cluster=devnet" class="footer-link" target="_blank">Solscan</a>
        <a href="https://x-pact.github.io/PrivateDAO/" class="footer-link" target="_blank">Live App</a>
      </div>
    </div>
  </div>
</footer>

<!-- COMMIT MODAL -->
<div class="modal-overlay" id="commitModal">
  <div class="modal">
    <button class="modal-close" onclick="closeModal('commitModal')">‚úï</button>
    <div class="modal-title">CAST VOTE</div>
    <div class="modal-sub">Your vote is sealed with SHA256. Nobody sees it until the reveal phase ends.</div>

    <div class="vote-grid">
      <div class="vote-opt yes" id="voteYes" onclick="selectVote('yes')">YES</div>
      <div class="vote-opt no" id="voteNo" onclick="selectVote('no')">NO</div>
    </div>

    <div class="network-indicator">
      <span class="net-dot"></span>
      <span>Connected to</span>
      <span class="net-name">Solana Devnet</span>
      <span style="margin-left:auto">Program: 62qdrtJG...</span>
    </div>

    <div class="commit-preview">
      <div class="commit-preview-label">COMMITMENT ‚Äî GENERATED CLIENT-SIDE</div>
      <div class="commit-formula">sha256( vote_byte ‚Äñ salt[32] ‚Äñ voter_pubkey )</div>
      <div class="commit-hash" id="hashDisplay">Select YES or NO to generate your commitment hash...</div>
    </div>

    <button class="submit-btn" id="submitBtn" disabled onclick="submitVote()">
      Submit Commitment On-Chain
    </button>
  </div>
</div>

<!-- REVEAL MODAL -->
<div class="modal-overlay" id="revealModal">
  <div class="modal">
    <button class="modal-close" onclick="closeModal('revealModal')">‚úï</button>
    <div class="modal-title">REVEAL VOTE</div>
    <div class="modal-sub">Submit your (vote, salt) proof. The program recomputes and verifies on-chain.</div>

    <div class="commit-preview" style="margin-bottom:20px">
      <div class="commit-preview-label">YOUR STORED COMMITMENT</div>
      <div class="commit-hash">0x7f3a9c2e4b6d8f1a0e5c7b3a9f2d4e6c8b1a3f5d7e9c2b4a6f8d1e3c5b7a9f2d</div>
    </div>

    <div style="background:var(--void);border:1px solid var(--border);border-radius:12px;padding:20px;margin-bottom:20px;font-family:var(--mono);font-size:12px;line-height:1.9">
      <div style="color:var(--text3);font-size:9px;letter-spacing:3px;margin-bottom:14px">PROOF VERIFICATION</div>
      <div><span style="color:var(--cyan)">vote:&nbsp;&nbsp;&nbsp;</span><span style="color:var(--amber)">YES (1)</span></div>
      <div><span style="color:var(--cyan)">salt:&nbsp;&nbsp;&nbsp;</span><span style="color:var(--text2)">a4f2c8e1b7d9f3a6c8e1b...</span></div>
      <div><span style="color:var(--cyan)">pubkey:&nbsp;</span><span style="color:var(--text2)">Ff5MpZsk...UtsZ</span></div>
      <div style="margin-top:12px;color:var(--green)">‚úì sha256(above) == stored_commitment</div>
    </div>

    <div class="rebate-note">üí∞ You will receive 0.001 SOL rebate for revealing</div>

    <button class="submit-btn" style="background:var(--cyan)" onclick="submitReveal()">
      Submit Reveal Proof On-Chain
    </button>
  </div>
</div>

<!-- TOAST -->
<div class="toast" id="toast"></div>

<script>
// ‚îÄ‚îÄ Cursor ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const cursor = document.getElementById('cursor');
const ring   = document.getElementById('cursorRing');
let mx=0, my=0, rx=0, ry=0;
document.addEventListener('mousemove', e => {
  mx = e.clientX; my = e.clientY;
  cursor.style.left = mx - 6 + 'px';
  cursor.style.top  = my - 6 + 'px';
});
setInterval(() => {
  rx += (mx - rx) * 0.12;
  ry += (my - ry) * 0.12;
  ring.style.left = rx - 20 + 'px';
  ring.style.top  = ry - 20 + 'px';
}, 16);
document.querySelectorAll('button, a, .proposal-card, .vote-opt').forEach(el => {
  el.addEventListener('mouseenter', () => { ring.style.transform = 'scale(1.8)'; ring.style.opacity = '0.7'; });
  el.addEventListener('mouseleave', () => { ring.style.transform = 'scale(1)'; ring.style.opacity = '0.4'; });
});

// ‚îÄ‚îÄ Nav scroll ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
window.addEventListener('scroll', () => {
  document.getElementById('nav').classList.toggle('scrolled', scrollY > 40);
});

// ‚îÄ‚îÄ Page navigation ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function showPage(page, btn) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('.nav-link').forEach(b => b.classList.remove('active'));
  document.getElementById('page-' + page).classList.add('active');
  if(btn) btn.classList.add('active');
  window.scrollTo({top:0, behavior:'smooth'});
  setTimeout(observeReveal, 100);
}

// ‚îÄ‚îÄ Scroll to proposals ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function scrollToProposals() {
  document.getElementById('proposals-anchor').scrollIntoView({behavior:'smooth'});
}

const DEVNET_RPC = "https://solana-devnet.g.alchemy.com/v2/L4dlywEyiBJLg8Ey0bFof";
const PROGRAM_ID = "62qdrtJGP23PwmvAn5c5B9xT1LSgdnq4p1sQsHnKVFhm";
const connection = new solanaWeb3.Connection(DEVNET_RPC, "confirmed");
const programPk = new solanaWeb3.PublicKey(PROGRAM_ID);
const statusByIdx = ["Voting", "Passed", "Failed", "Cancelled", "Vetoed"];

// Stop synthetic tally. The current app only shows real on-chain values.
document.getElementById('liveYesNum').textContent = "On-chain";
document.getElementById('liveNoNum').textContent = "On-chain";
document.getElementById('liveYesBar').style.width = "50%";
document.getElementById('liveNoBar').style.width = "50%";

// ‚îÄ‚îÄ Wallet ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
let wallet = null;
let walletProvider = null;
let currentCommitSaltHex = null;
let currentCommitHashHex = null;

function shortPk(pk) {
  return `${pk.slice(0, 4)}...${pk.slice(-4)}`;
}

function updateWalletUi(connected) {
  const btn  = document.getElementById('walletBtn');
  const dot  = document.getElementById('statusDot');
  const lbl  = document.getElementById('walletLabel');
  if (!connected || !wallet) {
    lbl.textContent = 'Connect Wallet';
    dot.className = 'status-dot';
    btn.className = 'wallet-btn';
    return;
  }
  lbl.textContent = shortPk(wallet);
  dot.className = 'status-dot live';
  btn.className = 'wallet-btn connected';
}

async function connectWallet() {
  if (wallet && walletProvider && walletProvider.disconnect) {
    await walletProvider.disconnect();
    wallet = null;
    walletProvider = null;
    updateWalletUi(false);
    showToast('Disconnected', 'info');
    return;
  }

  if (window.solana && window.solana.isPhantom) {
    walletProvider = window.solana;
  } else if (window.solflare && window.solflare.isSolflare) {
    walletProvider = window.solflare;
  } else {
    showToast('Install Phantom or Solflare to sign transactions.', 'error');
    return;
  }

  try {
    const resp = await walletProvider.connect();
    wallet = resp.publicKey.toString();
    updateWalletUi(true);
    showToast(`Connected: ${shortPk(wallet)}`, 'success');
  } catch (e) {
    wallet = null;
    walletProvider = null;
    updateWalletUi(false);
    showToast('Wallet connection rejected.', 'error');
  }
}

function parseU64(data, offset) {
  const view = new DataView(data.buffer, data.byteOffset + offset, 8);
  return Number(view.getBigUint64(0, true));
}

function parseI64(data, offset) {
  const view = new DataView(data.buffer, data.byteOffset + offset, 8);
  return Number(view.getBigInt64(0, true));
}

function parseString(data, offsetRef) {
  const len = new DataView(data.buffer, data.byteOffset + offsetRef.value, 4).getUint32(0, true);
  offsetRef.value += 4;
  const raw = data.slice(offsetRef.value, offsetRef.value + len);
  offsetRef.value += len;
  return new TextDecoder().decode(raw);
}

function decodeProposalAccount(data, pubkey) {
  const o = { value: 8 }; // skip discriminator
  const dao = new solanaWeb3.PublicKey(data.slice(o.value, o.value + 32)).toBase58();
  o.value += 32;
  const proposer = new solanaWeb3.PublicKey(data.slice(o.value, o.value + 32)).toBase58();
  o.value += 32;
  const proposalId = parseU64(data, o.value); o.value += 8;
  const title = parseString(data, o);
  const description = parseString(data, o);
  const statusIdx = data[o.value]; o.value += 1;
  const votingEnd = parseI64(data, o.value); o.value += 8;
  const revealEnd = parseI64(data, o.value); o.value += 8;
  const yesCapital = parseU64(data, o.value); o.value += 8;
  const noCapital = parseU64(data, o.value); o.value += 8;
  const yesCommunity = parseU64(data, o.value); o.value += 8;
  const noCommunity = parseU64(data, o.value); o.value += 8;
  const commitCount = parseU64(data, o.value); o.value += 8;
  const revealCount = parseU64(data, o.value); o.value += 8;

  const hasAction = data[o.value]; o.value += 1;
  if (hasAction === 1) {
    o.value += 1; // action_type
    o.value += 8; // amount_lamports
    o.value += 32; // recipient
    const hasMint = data[o.value]; o.value += 1;
    if (hasMint === 1) o.value += 32;
  }

  const executionUnlocksAt = parseI64(data, o.value); o.value += 8;
  const isExecuted = data[o.value] === 1;
  return {
    pubkey: pubkey.toBase58(),
    dao,
    proposer,
    proposalId,
    title,
    description,
    status: statusByIdx[statusIdx] || `Unknown(${statusIdx})`,
    votingEnd,
    revealEnd,
    executionUnlocksAt,
    isExecuted,
    yesCapital,
    noCapital,
    yesCommunity,
    noCommunity,
    commitCount,
    revealCount,
  };
}

function computePhase(p, nowTs) {
  if (p.isExecuted) return "Executed";
  if (p.status === "Cancelled" || p.status === "Vetoed" || p.status === "Failed") return p.status;
  if (nowTs < p.votingEnd && p.status === "Voting") return "Commit";
  if (nowTs < p.revealEnd && p.status === "Voting") return "Reveal";
  if (p.status === "Passed" && nowTs < p.executionUnlocksAt) return "Timelocked";
  if (p.status === "Passed" && nowTs >= p.executionUnlocksAt) return "Executable";
  return "Finalized";
}

function proposalCardHtml(p, nowTs) {
  const phase = computePhase(p, nowTs);
  const className = phase === "Commit"
    ? "phase-commit"
    : phase === "Reveal"
      ? "phase-reveal"
      : "phase-passed";
  return `
    <div class="proposal-card ${className}">
      <div class="proposal-header">
        <span class="proposal-id">PROP-${String(p.proposalId).padStart(3, '0')} ¬∑ devnet ¬∑ ${PROGRAM_ID.slice(0, 8)}...</span>
        <span class="phase-pill">${phase}</span>
      </div>
      <div class="proposal-title">${p.title}</div>
      <div class="proposal-desc">${p.description}</div>
      <div class="proposal-meta">
        <div class="meta-kv"><div class="meta-k">STATUS</div><div class="meta-v">${p.status}</div></div>
        <div class="meta-kv"><div class="meta-k">COMMITS</div><div class="meta-v">${p.commitCount}</div></div>
        <div class="meta-kv"><div class="meta-k">REVEALS</div><div class="meta-v">${p.revealCount}</div></div>
        <div class="meta-kv"><div class="meta-k">YES / NO</div><div class="meta-v">${p.yesCapital} / ${p.noCapital}</div></div>
      </div>
      <div class="proposal-actions">
        <button class="action-btn action-commit" onclick="openCommitModal(${p.proposalId})">Commit</button>
        <button class="action-btn action-reveal" onclick="openRevealModal(${p.proposalId})">Reveal</button>
      </div>
    </div>
  `;
}

async function loadLiveProposals() {
  const list = document.getElementById('proposalsList');
  try {
    const accounts = await connection.getProgramAccounts(programPk);
    const proposals = [];
    for (const acc of accounts) {
      try {
        const p = decodeProposalAccount(acc.account.data, acc.pubkey);
        proposals.push(p);
      } catch (_) {}
    }

    proposals.sort((a, b) => b.proposalId - a.proposalId);
    const nowSlot = await connection.getSlot("confirmed");
    const nowTs = (await connection.getBlockTime(nowSlot)) || Math.floor(Date.now() / 1000);

    if (proposals.length === 0) {
      list.innerHTML = `
        <div class="proposal-card phase-commit">
          <div class="proposal-header"><span class="proposal-id">NO PROPOSALS FOUND</span></div>
          <div class="proposal-title">No on-chain proposals for current program ID</div>
          <div class="proposal-desc">Create one via CLI: \`yarn create-proposal -- --dao <DAO_PDA> ...\` then refresh.</div>
        </div>
      `;
      return;
    }
    list.innerHTML = proposals.slice(0, 12).map(p => proposalCardHtml(p, nowTs)).join("");
  } catch (e) {
    list.innerHTML = `
      <div class="proposal-card phase-commit">
        <div class="proposal-header"><span class="proposal-id">RPC ERROR</span></div>
        <div class="proposal-title">Could not load devnet proposal accounts</div>
        <div class="proposal-desc">Check RPC access for ${DEVNET_RPC} and verify program ID ${PROGRAM_ID}.</div>
      </div>
    `;
  }
}

// ‚îÄ‚îÄ Modals ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
let selectedVote = null;
function openCommitModal(id) {
  selectedVote = null;
  currentCommitSaltHex = null;
  currentCommitHashHex = null;
  document.getElementById('voteYes').classList.remove('sel');
  document.getElementById('voteNo').classList.remove('sel');
  document.getElementById('hashDisplay').textContent = 'Select YES or NO to generate your commitment hash...';
  document.getElementById('submitBtn').disabled = true;
  document.getElementById('commitModal').classList.add('open');
}
function openRevealModal() { document.getElementById('revealModal').classList.add('open'); }
function closeModal(id) { document.getElementById(id).classList.remove('open'); }

async function selectVote(v) {
  selectedVote = v;
  document.getElementById('voteYes').classList.toggle('sel', v==='yes');
  document.getElementById('voteNo').classList.toggle('sel', v==='no');

  if (!wallet) {
    showToast('Connect your wallet first to derive commitment hash.', 'error');
    return;
  }

  const el = document.getElementById('hashDisplay');
  el.classList.add('computing');
  el.textContent = 'Computing sha256...';
  const voter = new solanaWeb3.PublicKey(wallet);
  const salt = new Uint8Array(32);
  crypto.getRandomValues(salt);
  const preimage = new Uint8Array(65);
  preimage[0] = v === "yes" ? 1 : 0;
  preimage.set(salt, 1);
  preimage.set(voter.toBytes(), 33);
  const digest = new Uint8Array(await crypto.subtle.digest("SHA-256", preimage));
  currentCommitSaltHex = [...salt].map(b => b.toString(16).padStart(2, "0")).join("");
  currentCommitHashHex = [...digest].map(b => b.toString(16).padStart(2, "0")).join("");
  el.textContent = `0x${currentCommitHashHex}`;
  el.classList.remove('computing');
  document.getElementById('submitBtn').disabled = false;
}

// ‚îÄ‚îÄ Submit ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function submitVote() {
  if(!wallet || !currentCommitHashHex || !currentCommitSaltHex) {
    showToast('Connect wallet and generate commitment first.', 'error'); return;
  }
  closeModal('commitModal');
  showToast(`Commit hash ready. Use scripts/commit-vote.ts with salt 0x${currentCommitSaltHex.slice(0,16)}...`, 'info');
}

function submitReveal() {
  if(!wallet) {
    showToast('Connect wallet first.', 'error'); return;
  }
  closeModal('revealModal');
  showToast('Use scripts/reveal-vote.ts with your original vote + salt.', 'info');
}

function vetoProposal() {
  if(!wallet) { showToast('Connect DAO authority wallet to veto', 'error'); return; }
  showToast('‚ö† Veto requires DAO authority signature', 'info');
}

function startMigration() {
  if(!wallet) { showToast('Connect your Realms authority wallet first', 'error'); return; }
  showToast('Migration is executed via migrations/migrate-realms-dao.ts script.', 'info');
}

// ‚îÄ‚îÄ Toast ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function showToast(msg, type='info') {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.className = 'toast ' + type + ' show';
  setTimeout(() => t.classList.remove('show'), 3500);
}

// ‚îÄ‚îÄ Scroll reveal ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function observeReveal() {
  const obs = new IntersectionObserver(entries => {
    entries.forEach(e => { if(e.isIntersecting) e.target.classList.add('in'); });
  }, {threshold: 0.08});
  document.querySelectorAll('.reveal').forEach(el => obs.observe(el));
}
observeReveal();

loadLiveProposals();
setInterval(loadLiveProposals, 30_000);

// ‚îÄ‚îÄ Close on overlay click ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
document.querySelectorAll('.modal-overlay').forEach(o => {
  o.addEventListener('click', e => { if(e.target===o) o.classList.remove('open'); });
});
document.addEventListener('keydown', e => {
  if(e.key==='Escape') document.querySelectorAll('.modal-overlay').forEach(o => o.classList.remove('open'));
});
</script>
</body>
</html>
